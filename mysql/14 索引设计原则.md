# 索引设计原则

## 什么情况下适合添加索引

1. 字段数值有唯一性的限制

2. 频繁作为where条件的列

3. 经常group by或者order by的列

4. distinct的字段适合添加索引

5. 多表连接时，做连接的字段适合添加索引，并且连接的表不要超过3张

6. 列的类型占字节数少的字段（一页可以存更多数据）

7. 使用字符串前缀创建索引，具体前缀取多长需要计算区分度，区分度越接近1则代表重复的值越少

   count(distinct left(列名, 长度)) / count(*)

8. 区分度高的列适合建立索引，一般来说超过33%就算是比较高效的索引了

9. 频繁使用的列适合放到联合索引的左侧

10. 在多个字段需要创建索引的情况下，联合索引优于单值索引

## 什么情况下不适合添加索引

1. where当中用不到的不要添加索引
2. 数据量小的表不适合创建索引
3. 大量重复数据上不适合创建索引（有点疑问，要看具体业务）
4. 避免对经常进行更新的表创建过多的索引
5. 不建议用无序的值做为索引（会造成频繁的页分裂，但是这个根业务有关，很多场景没办法必须建）
